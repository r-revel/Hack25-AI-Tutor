{
  "title": "Развертывание backend-приложения в контейнере",
  "chapters": [
    {
      "name": "Развертывание backend-приложения в контейнере",
      "content": "Практические руководства Evolution    \n\n # Развертывание backend-приложения в контейнере   Эта статья полезна?          \nС помощью этого руководства вы научитесь разворачивать backend-приложение в контейнере.\nВы будете использовать репозиторий GitVerse с исходным кодом готовых backend-приложений на языках Python, Go, JavaScript, C#.\nКаждое приложение является простым примером реализации REST API, которое возвращает список значений с демонстрационными данными.\nНа примере развертывания backend-приложения вы познакомитесь с дополнительными настройками сервиса Container Apps.\nВы будете использовать следующие сервисы:\n- Artifact Registry для хранения, совместного использования и управления Docker-образами и Helm-чартами.\n- Container Apps — сервис для запуска контейнерных приложений в облаке. Не требует знания Kubernetes и создания виртуальных машин.\n- Систему контроля версий GitVerse.\nШаги:\n1. Подготовьте среду.\n2. Клонируйте или скачайте репозиторий кода c GitVerse.\n3. Соберите образ и присвойте тег.\n4. Загрузите Docker-образ в реестр.\n5. Создайте и запустите контейнер.\n6. Проверьте работоспособность развернутого приложения.\n\n## Перед началом работы\nЗарегистрируйтесь в личном кабинете Cloud.ru.\nЕсли вы уже зарегистрированы, войдите под своей учетной записью.\n\n## 1. Подготовьте среду\nПодготовьте среду, если не сделали этого ранее.\n\n## 2. (Опционально) Клонируйте или скачайте репозиторий кода c GitVerse\nВы можете зарегистрироваться в GitVerse, если у вас еще нет аккаунта, и познакомиться с новой системой контроля версий. Этот шаг необязательный и не влияет на дальнейшее прохождение сценария.\nВ этом репозитории находится исходный код простого REST API приложения, написанного на разных языках: JavaScript, Python, Go, C#.\n```\ngit clone https://gitverse.ru/cloudru/evo-containerapp-restapi-js-go-python-dotnet-sample\n```\n\n## 3. Соберите образ и присвойте тег\nВнимание Убедитесь, что Docker Desktop запущен и пользователь авторизован в приложении.\nИспользуйте реестр, созданный на этапе подготовки среды.\nВыполните команду для сборки образа:\n```\ndocker build --tag <registry_name>.cr.cloud.ru/restapi-python https://gitverse.ru/cloudru/evo-containerapp-restapi-js-go-python-dotnet-sample.git#master:restapi-python/src --platform linux/amd64\n```\n\nДля создания контейнера Docker-образ должен быть собран под платформу linux/amd64, поэтому в команде используется флаг platform со значением linux/amd64.\n\n## 4. Загрузите Docker-образ в реестр\nЗагрузите образ в реестр Artifact Registry, выполнив команду:\n```\ndocker push <registry_name>.cr.cloud.ru/restapi-python\n```\n\nГде:\n- <registry_name> — название реестра, которое вы указывали при его создании в Artifact Registry.\n- restapi-python — название будущего репозитория в Artifact Registry. Название репозитория соответствует имени Docker-образа..\n\n## 5. Создайте и запустите контейнер\n1. Откройте меню загруженного образа и нажмите Создать Container App.\n2. Заполните поля и активируйте опции:\n\n- Название контейнера — глобально уникальное имя, на базе которого формируется адрес вашего приложения в домене *.containers.cloud.ru.\n- Порт контейнера — порт контейнера, который должен совпадать с портом вашего приложения.\nВ этом сценарии используем порт 8080.\n\n```\nserver {    listen 8080;    root /usr/share/nginx/html;    index index.html;\n    location / {        try_files $uri $uri/ /index.html;    }}\n```\n- vCPU/RAM — количество vCPU и RAM, которые выделяются для каждого экземпляра контейнера при обработке вызова.\nВыберите минимальную конфигурацию.\n- Минимальное и максимальное количество экземпляров при масштабировании сервиса. По умолчанию происходит масштабирование с 0, что может вызывать небольшую задержку при старте вашего приложения. Установите минимальное количество экземпляров — 0, а максимальное — 1.\n- Публичный адрес — активируйте опцию, чтобы получить URL-адрес для вызова приложения из интернета.\n- Автоматическое развертывание — активируйте опцию, чтобы каждый раз после загрузки в Artifact Registry новой версии образа на стороне Container Apps автоматически создавалась новая ревизия контейнера.\n3. Нажмите Создать.\nОткроется страница сервиса Container Apps.\nКонтейнер будет запущен в течение нескольких секунд.\nДождитесь, когда контейнер и ревизия перейдут в статус «Выполняется».\n\n## 6. Проверьте работоспособность развернутого приложения\nДождитесь появления публичного URL, скопируйте его и вставьте в адресную строку браузера.\n\n \n Что делать, если приложение не отвечает \n \n\n## Результат\nВы научились:\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}