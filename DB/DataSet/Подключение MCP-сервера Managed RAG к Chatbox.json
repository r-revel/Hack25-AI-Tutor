{
  "title": "Подключение MCP-сервера Managed RAG к Chatbox",
  "chapters": [
    {
      "name": "Подключение MCP-сервера Managed RAG к Chatbox",
      "content": "Практические руководства Evolution    \n\n # Подключение MCP-сервера Managed RAG к Chatbox   Эта статья полезна?          \nС помощью этого руководства вы подключите MCP-сервер к базе знаний, чтобы использовать AI-агента с инструментом поиска по базе знаний в интерфейсе Chatbox AI.\nВы будете использовать следующие сервисы:\n- Managed RAG — сервис для создания и управления базами знаний, используемыми при генерации ответов языковыми моделями.\n- AI Agents — сервис для создания и управления AI-агентами и агентными системами.\n- Foundation Models — сервис для доступа к API популярных фундаментальных моделей машинного обучения с открытым исходным кодом.\n- Chatbox AI — внешний сервис для взаимодействия с LLM через open source чат-интерфейс.\nШаги:\n1. Создайте базу знаний.\n2. Создайте и протестируйте MCP-сервер.\n3. Подключите MCP к Chatbox.\n4. Сравните ответы моделей с подключенным MCP и без него.\n\n## Перед началом работы\n1. Скачайте Chatbox AI для вашей операционной системы.\n2. Убедитесь, что сервис Foundation Models подключен в личном кабинете Cloud.ru, и добавьте его в Chatbox AI.\n3. Убедитесь, что в личном кабинете Cloud.ru подключен сервис AI Agents.\n\n## 1. Получите данные базы знаний\n1. Перейдите в AI Factory → Managed RAG.\n2. Создайте базу знаний из JSON-файлов.\n3. Откройте любую версию базы знаний.\n4. На вкладке Информация скопируйте и сохраните, например в блокнот, ID версии и ID базы знаний.\n\n## 2. Создайте и протестируйте MCP-сервер\n1. Перейдите в AI Factory → AI Agents, на вкладку MCP-серверы.\n2. Нажмите Создать MCP-сервер.\n3. Задайте основные настройки:\n1. Введите название: mcp-server-rag.\n2. на вкладке Маркетплейс выберите сервер evolution-managed-rag-mcp.\n3. Заполните переменные окружения сохраненными ID базы знаний и ее версии:\n- KNOWLEDGE_BASE_ID — ID базы знаний;\n- KNOWLEDGE_BASE_VERSION_ID — ID версии базы знаний.\n4. Задайте масштабирование и дополнительные опции:\n1. Выберите минимальное и максимальное количество экземпляров равным 1.\n2. Включите опции Запускать все дочерние контейнеры при запросе и Не выключать MCP-сервер.\n3. Выберите Тип масштабирования — RPS, задайте значение 200.\n4. Включите дополнительную опцию Логирование запросов.\n5. Нажмите Создать.\n5. Дождитесь, пока MCP-сервер перейдет в статус «Запущен».\n6. Протестируйте сервер.\nДля этого на вкладке Тестирование скопируйте и отправьте запрос:\n```\nЧто такое Evolution Magic Router?\n```\n\nВы получите ответ, которые базируется на информации из базы знаний.\nДалее в этом руководстве мы стараемся получить тот же ответ, но в интерфейсе Chatbox AI.\n\n## 3. Подключите MCP к Chatbox AI\n1. Скопируйте публичный URL MCP-сервера — он находится под названием сервера.\n2. Откройте Chatbox AI.\n3. Перейдите в Настройки → MCP и нажмите Добавить сервер.\n4. Выберите Добавить пользовательский сервер.\n5. Введите название, например evolution-rag.\n6. Выберите Тип — Удаленный.\n7. Вставьте скопированный ранее публичный URL MCP-сервера из AI Agents, добавив к нему в конце /mcp.\nНапример: https://e1d123b1-xxxx-xxxx-xxxx-2fdebd6da312-mcp-server.ai-agent.inference.cloud.ru/mcp.\n8. Нажмите Тест.\nПоявится блок Инструменты со значением request_to_rag.\n9. Нажмите Сохранить.\n\n## 4. Сравните ответы моделей с подключенным MCP и без него\n1. В Chatbox AI создайте чат с моделью из Foundation Models без базы знаний.\nИспользуйте «t-tech/T-lite-it-1.0».\n1. В чате с моделью «t-tech/T-lite-it-1.0» введите запрос:\n```\nЧто такое Evolution Magic Router?\n```\nВ ответе, который вы получили, модель не знает об этой сущности и предлагает несколько предположений.\n2. В Chatbox AI создайте чат, нажав Новый чат.\n1. Внизу чата нажмите Настроить настройки для текущего разговора.\n2. В поле Инструкция (Системная подсказка) введите:\n```\nТы — ассистент для ответов на вопросы о платформе Cloud.ru Evolution.\nОбращайся к базе знаний, когда пользователь спрашивает об этой платформе.Используй инструмент request_to_rag, чтобы получить достоверную информацию о платформе Cloud.ru Evolution из базы знаний.\n```\n3. Остальные настройки оставьте по умолчанию.\n4. Нажмите Сохранить.\nУбедитесь, что в чате включен MCP-сервер evolution_rag.\n5. Отправьте в чате запрос:\n```\nЧто такое Evolution Magic Router?\n```\n\nТеперь модель знает о существовании этого сервиса и может предоставить достоверную информацию.\n\n## Что дальше\nС этим руководством вы создали MCP-сервер AI Agents для Managed RAG и подключили к Chatbox AI.\nУзнавайте больше о прикладных сценариях и примерах решения бизнес-задач, получайте навыки управления облаком, выполняя практические руководства.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}