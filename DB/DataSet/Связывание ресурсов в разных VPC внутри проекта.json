{
  "title": "Связывание ресурсов в разных VPC внутри проекта",
  "chapters": [
    {
      "name": "Связывание ресурсов в разных VPC внутри проекта",
      "content": "Практические руководства Evolution    \n\n # Связывание ресурсов в разных VPC внутри проекта   Эта статья полезна?          \nС помощью этого руководства вы настроите сетевую связность между виртуальными машинами из разных VPC, принадлежащих одному проекту.\nВы будете использовать соединения, маршруты и правила групп безопасности для связи ресурсов.\nСхема сетевой связности ресурсов представлена ниже.\n\nВы будете использовать следующие сервисы:\n- Виртуальные машины — сервис, в рамках которого предоставляется виртуальная машина.\n- VPC — изолированная виртуальная сеть для создания безопасной инфраструктуры.\n- Magic Router — сервис для управления сетевыми связями между ресурсами внутри облачной инфраструктуры.\n- Группы безопасности — сервис для контроля трафика виртуальных машин.\nШаги:\n1. Разверните ресурсы в облаке.\n2. Создайте соединение между VPC.\n3. Настройте маршруты на Magic Router.\n4. Настройте маршруты для VPC.\n5. Настройте правила групп безопасности.\n6. Проверьте сетевую связность.\n\n## Перед началом работы\n1. Зарегистрируйтесь в личном кабинете Cloud.ru.\nЕсли вы уже зарегистрированы, войдите под своей учетной записью.\n2. Создайте и загрузите SSH-ключ в облако.\n\n## 1. Разверните ресурсы в облаке\n1. Создайте две VPC-сети с названиями VPC-1 и VPC-2.\n2. Создайте подсеть subnet-1:\n- Название: subnet-1.\n- VPC: VPC-1.\n- Зона доступности: ru.AZ-1.\n- Адрес: 10.1.1.0/24.\n3. Создайте подсеть subnet-2:\n- Название: subnet-2.\n- VPC: VPC-1.\n- Зона доступности: ru.AZ-2.\n- Адрес: 10.3.3.0/24.\n4. Создайте подсеть subnet-3:\n- Название: subnet-3.\n- VPC: VPC-2.\n- Зона доступности: ru.AZ-1.\n- Адрес: 10.2.2.0/24.\nУбедитесь, что на странице сервиса Подсети подсети subnet-1, subnet-2, subnet-3 находятся в статусе «Создана».\n5. Создайте виртуальную машину со следующими параметрами:\n- Название: vm-1.\n- Зона доступности: ru.AZ-1.\n- Образ: Публичные → Ubuntu 22.04.\n- Гарантированная доля vCPU: 10%.\n- vCPU: 1.\n- RAM: 1.\n- VPC: VPC-1.\n- Подсеть: 10.1.1.0/24 (subnet-1).\n- Внутренний IP: Автоматически.\n- Группы безопасности: SSH-access_ru.AZ-1.\n- Метод аутентификации: Публичный ключ и пароль.\n- Публичный ключ: ваш SSH-ключ.\n- Пароль: ваш пароль.\n- Имя хоста: vm-1.\n6. Создайте виртуальную машину со следующими параметрами:\n- Название: vm-2.\n- Зона доступности: ru.AZ-2.\n- Образ: Публичные → Ubuntu 22.04.\n- Гарантированная доля vCPU: 10%.\n- vCPU: 1.\n- RAM: 1.\n- VPC: VPC-1.\n- Подсеть: 10.3.3.0/24 (subnet-2).\n- Внутренний IP: Автоматически.\n- Группы безопасности: SSH-access_ru.AZ-2.\n- Метод аутентификации: Публичный ключ и пароль.\n- Публичный ключ: ваш SSH-ключ.\n- Пароль: ваш пароль.\n- Имя хоста: vm-2.\n7. Создайте виртуальную машину со следующими параметрами:\n- Название: vm-3.\n- Зона доступности: ru.AZ-1.\n- Образ: Публичные → Ubuntu 22.04.\n- Гарантированная доля vCPU: 10%.\n- vCPU: 1.\n- RAM: 1.\n- VPC: VPC-2.\n- Подсеть: 10.2.2.0/24 (subnet-3).\n- Внутренний IP: Автоматически.\n- Группы безопасности: SSH-access_ru.AZ-1.\n- Метод аутентификации: Публичный ключ и пароль.\n- Публичный ключ: ваш SSH-ключ.\n- Пароль: ваш пароль.\n- Имя хоста: vm-3.\nУбедитесь, что в личном кабинете на странице сервиса Виртуальные машины отображается виртуальные машины vm-1, vm-2, vm-3 в статусе «Запущена».\n\n## 2. Создайте соединение между VPC\n1. Выберите сервис Magic Router.\n2. Нажмите Создать Magic Router.\n3. Нажмите VPC Evolution.\n4. Выберите VPC-1 и VPC-2.\n5. Нажмите Создать.\nУбедитесь, что в сервисе Magic Router на странице Соединения отображается два соединения в статусе «Активно».\n\n## 3. Настройте маршруты на Magic Router\nПри создании маршрутов в Magic Router необходимо указывать зону доступности, в которой расположена целевая подсеть.\n1. В сервисе Magic Router создайте маршрут к подсети subnet-1:\n- Адрес назначения: 10.1.1.0/24.\n- VPC: VPC-1.\n- Зона доступности: ru.AZ-1.\n2. В сервисе Magic Router создайте маршрут к подсети subnet-2:\n- Адрес назначения: 10.3.3.0/24.\n- VPC: VPC-1.\n- Зона доступности: ru.AZ-2.\n3. В сервисе Magic Router создайте маршрут к подсети subnet-3:\n- Адрес назначения: 10.2.2.0/24.\n- VPC: VPC-2.\n- Зона доступности: ru.AZ-1.\nУбедитесь, что в сервисе Magic Router на странице Маршруты отображаются три маршрута в статусе «Создан».\n\n## 4. Настройте маршруты для VPC\nПри создании маршрутов в VPC необходимо указывать зону доступности, в которой расположена подсеть этой VPC.\nЕсли в VPC созданы подсети в нескольких зонах доступности, маршруты необходимо создать в каждой зоне доступности.\n1. В сервисе Evolution VPC выберите VPC-1.\n1. Создайте пользовательский маршрут с параметрами:\n- Адрес назначения: 10.2.2.0/24.\n- Next Hop Type: Magic Router.\n- Зона доступности: ru.AZ-1.\n2. Создайте еще один маршрут с параметрами:\n- Адрес назначения: 10.2.2.0/24.\n- Next Hop Type: Magic Router.\n- Зона доступности: ru.AZ-2.\nУбедитесь, что для VPC-1 на странице Маршруты отображаются два маршрута в статусе «Активен».\n2. В сервисе Evolution VPC выберите VPC-2.\n1. Создайте пользовательский маршрут с параметрами:\n- Адрес назначения: 10.1.1.0/24.\n- Next Hop Type: Magic Router.\n- Зона доступности: ru.AZ-1.\n2. Создайте еще один маршрут с параметрами:\n- Адрес назначения: 10.3.3.0/24.\n- Next Hop Type: Magic Router.\n- Зона доступности: ru.AZ-1.\nУбедитесь, что для VPC-2 на странице Маршруты отображаются два маршрута в статусе «Активен».\n\n## 5. Настройте правила групп безопасности\n1. Выберите сервис Группы безопасности.\n2. Для группы безопасности SSH-access_ru.AZ-1 создайте правило для входящего трафика с параметрами:\n- Протокол: ICMP.\n- Тип источника: IP-адрес.\n- Источник: 0.0.0.0/0.\n3. Для группы безопасности SSH-access_ru.AZ-2 создайте правило для входящего трафика с параметрами:\n- Протокол: ICMP.\n- Тип источника: IP-адрес.\n- Источник: 0.0.0.0/0.\n\n## 6. Проверьте сетевую связность\n1. Подключитесь к любой виртуальной машине через виртуальную консоль.\n2. Чтобы проверить сетевую связность с оставшимися виртуальными машинами, выполните команду:\n```\nping <IP>\n```\n\nГде IP — IP-адрес виртуальной машины, с которой надо проверить сетевую связность.\n\n## Результат\nВы настроили сетевую связность между виртуальными машинами из разных VPC, принадлежащих одному проекту.\nВы получили опыт работы с соединениями, маршрутами и правилами групп безопасности.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}