{
  "title": "Создать бэкап в Object Storage по расписанию в ADBC",
  "chapters": [
    {
      "name": "Создать бэкап в Object Storage по расписанию в ADBC",
      "content": "Практические руководства Evolution    \n\n # Создать бэкап в Object Storage по расписанию в ADBC   Эта статья полезна?          \nС помощью этого руководства вы настроите бэкапы по расписанию и восстановите исходные данные.\nВы будете использовать следующие сервисы:\n- Виртуальные машины — сервис, в рамках которого предоставляется виртуальная машина\n- Object Storage — объектное S3-хранилище с бесплатным хранением файлов, объемом до 15 ГБ.\n- Managed ArenadataDB — сервис для создания инстансов распределенной аналитической СУБД ArenadataDB, основанной на решении Greenplum®.\n\n## Постановка задачи\n1. Внести данные в ArenadataDB.\n2. Настроить бэкап по расписанию.\n3. Изменить данные и восстановить первоначальный вариант.\n\n## Перед началом работы\nВыполните шаги из практического руководства Работа с данными в ArenadataDB.\n\n## 1. Создайте бакет Object Storage\n1. Создайте бакет по инструкции.\n2. Создайте папку с названием «repo_adb».\nВ ней будут храниться файлы бэкапов.\n3. Сгенерируйте Key ID и Key Secret сервисного аккаунта и сохраните их.\nОни понадобятся для подключения бакета Object Storage к ADB.\n\n## 2. Создайте расписание для бэкапа\nДействия выполняются в интерфейсе ADBC.\n1. В интерфейсе ADBC в меню слева выберите Backup Manager.\n2. В разделе Clusters нажмите на название кластера ADB.\n3. Откройте вкладку Configuration.\n4. Создайте конфигурацию.\n5. Заполните поля:\n1. В разделе General configuration введите:\n- Full Backup schedule — свое актуальное время и добавьте к нему 5 минут в формате <sec> <min> <hour> ? * <day> *, где:\n- <sec> — секунда начала бэкапа.\n- <min> — минута начала бэкапа.\n- <hour> — час начала бэкапа.\n- <day> — день недели, когда начинается бэкап.\nНапример, MON для понедельника.\nДопустим, мы проходим лабораторную работу в среду в 17:25 по GMT+0.\nТогда введем значение 0 30 17 ? * WED * — полное резервное копирование будет начинаться в 17:30 каждую среду.\nЗапомните введенное время.\n2. В разделе Repository:\n- Repository type — выберите S3.\n- URI type — выберите Host.\n- Repository Path — введите /repo_adb.\n- Endpoint — введите https://s3.cloud.ru.\n- Bucket — введите глобальное название бакета.\n- Key — введите ID тенанта и ключ доступа сервисного аккаунта в виде <Tenant ID>:<Key ID>.\n- Tennant ID — скопируйте из поля ID тенанта на карточке бакета Object Storage.\n- Key ID — сохраненный Key ID сервисного аккаунта.\n- Key secret — введите Key Secret сервисного аккаунта.\n- Region — введите ru-central-1, если используете бакет Object Storage, или регион внешнего бакета, если используете хранилище другого провайдера.\n6. Нажмите Save.\nБэкап по расписанию появится в бакете Object Storage через несколько минут после введенного в поле Full Backup schedule времени.\nПеред следующим шагом убедитесь, что действие завершено и в бакете появились файлы бэкапа.\nЧтобы отслеживать статус действий в ADBC:\n1. В интерфейсе ADBC в меню слева выберите Backup Manager.\n2. В разделе Clusters нажмите на название кластера ArenadataDB.\n3. Откройте вкладку Actions.\n\n## 3. Удалите данные в таблице\nПосле того как придет время полного бэкапа по расписанию и в бакете Object Storage появятся файлы, в DBeaver выполните команду, чтобы удалить всю таблицу с данными:\n```\nDELETE FROM adb.lab.employees;\n```\n\n## 4. Восстановите данные\n1. В интерфейсе ADBC в меню слева выберите Backup Manager.\n2. В разделе Clusters нажмите на название кластера ADB.\n3. Откройте вкладку Restores.\n4. Нажмите .\n5. Выберите Restore.\n6. В поле Restore point выберите первую строчку.\n7. Нажмите Run.\n8. Когда восстановление завершится, в DBeaver обновите базу данных.\nУдаленная таблица восстановится.\nЧтобы отслеживать статус действий в ADBC:\n1. В интерфейсе ADBC в меню слева выберите Backup Manager.\n2. В разделе Clusters нажмите на название кластера ArenadataDB.\n3. Откройте вкладку Actions.\n\n## Результат\nС этим руководством вы настроили бэкапы для инстанса Managed ArenadataDB и проверили их работу на примере создания и удаления таблицы.\n\n## Что дальше\nВы можете сделать бэкап вручную и узнать больше о бэкапах в ADB.\nУзнавайте больше о прикладных сценариях и примерах решения бизнес-задач, выполняя практические руководства.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}