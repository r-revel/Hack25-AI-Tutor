{
  "title": "Создание Telegram-бота без написания кода с помощью n8n на основе Container Apps или Notebooks",
  "chapters": [
    {
      "name": "Создание Telegram-бота без написания кода с помощью n8n на основе Container Apps или Notebooks",
      "content": "Практические руководства Evolution    \n\n # Создание Telegram-бота без написания кода с помощью n8n на основе Container Apps или Notebooks   Эта статья полезна?          \nС помощью этого руководства вы развернете платформу для создания рабочих процессов без написания кода и создадите Telegram-бота, который будет повторять сообщения пользователя.\nВы можете развернуть платформу на основе сервиса Container Apps или Notebooks.\nВы будете использовать следующие сервисы:\n- Container Apps — сервис для запуска контейнерных приложений в облаке. Не требует знания Kubernetes и создания виртуальных машин.\n- Notebooks — сервис для запуска сред ML и работы DS-специалистов в ноутбуках на платформе Evolution.\n- Object Storage — объектное S3-хранилище с бесплатным хранением файлов, объемом до 15 ГБ.\nБудет использоваться в качестве постоянного хранилища для запущенного контейнера.\n- n8n — платформа с открытым кодом для автоматизации рабочих процессов и интеграции сервисов. Подходит для экспериментов и пет-проектов.\nШаги:\n1. Создайте бакет в сервисе Object Storage.\n2. Создайте контейнер / ноутбук с образом n8n.\n3. Зарегистрируйте бота в Telegram.\n4. Запустите n8n.\n5. Настройте параметры подключения к Telegram.\n6. Создайте триггер Telegram в n8n.\n7. Добавьте в чат статус «… печатает / … typing».\n8. Настройте ответ пользователю от бота.\n9. Убедитесь, что бот работает.\n\n## Перед началом работы\nЗарегистрируйтесь в личном кабинете Cloud.ru.\nЕсли вы уже зарегистрированы, войдите под своей учетной записью.\n\n## 1. Создайте бакет в сервисе Object Storage\nContainer AppsNotebooksВ сервисе Object Storage создайте новый бакет со следующими параметрами:\n- Название — <your_name>-n8n, например name-n8n.\n- Доменное имя — <your_name>-n8n, например name-n8n.\n- Класс хранения по умолчанию — Стандартный.\n- Максимальный размер — отключите или укажите на свое усмотрение.\nУбедитесь, что в личном кабинете на странице сервиса Object Storage:\n\n- в списке бакетов отображается созданный вами бакет;\n- класс хранения — Стандартный.\n\n## 2. Создайте контейнер / ноутбук с образом n8n\nContainer AppsNotebooksВ личном кабинете создайте контейнер n8n из готового образа с помощью Container Apps:\nВнимание Тестовый образ n8n создан в версии n8n@1.116.2.\nЕсли вы создаете и разворачиваете кастомный образ, рекомендуется использовать версию n8n 1.116.2 для стабильной работы образа с Container Apps.\n1. Перейдите на страницу сервиса Container Apps, выберите Container Services и нажмите Создать.\n2. Укажите Название создаваемого Container Service, например container-app-n8n-name.\n3. Включите Тестовый образ и выберите Ворклфлоу-приложение на n8n.\nНа вкладке Общие параметры отобразятся параметры тестового образа:\n- Конфигурация — 0.2 vCPU - 512 RAM.\n- Название контейнера, например n8n-container.\n- Порт контейнера — 5678.\n\nТестовый образ содержит следующие переменные:\n\n- Ключ — N8N_PROTOCOL, Значение — https.\n- Ключ — N8N_HOST, Значение — <container_app_name>.containerapps.ru, например container-app-n8n-name.containerapps.ru.\n- Ключ — WEBHOOK_URL, Значение — https://<container_app_name>.containerapps.ru, например https://container-app-n8n-name.containerapps.ru.\n- Ключ — GENERIC_TIMEZONE, Значение — Europe/Moscow или другая временная зона.\n\nПеременные не отображаются в мастере создания контейнера.\n4. На вкладке Тома создайте новый том со следующими параметрами:\n- Тип — Постоянный.\n- Название — например n8n-volume.\n- Бакет из Object Storage — выберите бакет сервиса Object Storage, который вы создали на шаге 1.\n- Путь (path) — /synced/n8n.\n5. Нажмите Следующий шаг.\n6. В поле Мин. кол-во экземпляров укажите значение 1.\n7. Нажмите Создать.\n8. Убедитесь, что в личном кабинете на странице созданного Container Service:\n- отображается одна ревизия;\n- статус ревизии — «Создается».\n9. Дождитесь, когда статус ревизии изменится на «Выполняется».\n\n## 3. Зарегистрируйте бота в Telegram\nДля работы вам потребуется зарегистрировать нового бота в Telegram и получить токен для него.\n1. В Telegram найдите бота BotFather.\n2. Выполните команду /newbot.\n3. Задайте для бота имя (name) и имя пользователя (username).\nИмя пользователя должно оканчиваться на Bot или _bot.\nВ нашем случае:\n- name: new-bot\n- username: nocodelabbot\nВ результате вы получите токен.\nСохраните его — он потребуется на следующих этапах.\nВнимание Токен является секретом.\nНе публикуйте его и не передавайте третьим лицам.\n\n## 4. Запустите n8n\nContainer AppsNotebooks Со страницы созданного на шаге 2 Container Service:\n1. Нажмите на публичный URL.\nОткроется интерфейс сервиса n8n с формой регистрации нового пользователя.\n2. Заполните поля формы регистрации и нажмите Next.\n3. В следующих окнах нажмите Get Started и Skip.\nПосле регистрации в n8n вы будете перенаправлены в веб-интерфейс n8n.\n\n## 5. Настройте параметры подключения к Telegram\nВ личном кабинете n8n создайте и настройте учетные данные для подключения к Telegram:\n1. В правом верхнем углу личного кабинета раскройте меню Create Workflow и выберите Create Credentials.\n2. В следующем окне в качестве типа создаваемой учетной записи выберите Telegram API и нажмите Continue.\nОткроется диалоговое окно создания учетной записи.\n3. В поле Access Token вставьте токен бота, полученный на шаге 3.\n4. В правом верхнем углу диалогового окна нажмите Save.\n5. Дождитесь, когда вверху окна появится подтверждение об успешном тестовом подключении, и закройте диалоговое окно.\nВнимание При ошибках в работе n8n обращайтесь к документации разработчика n8n.\n\n## 6. Создайте триггер Telegram в n8n\nВ личном кабинете n8n создайте триггер для Telegram-бота:\n1. В правом верхнем углу личного кабинета нажмите Create Workflow.\n2. В центре рабочей области My workflow нажмите Add first step.\n3. На вкладке выбора триггеров в поле поиска введите telegram и выберите Telegram в результатах поиска.\n4. В появившемся списке выберите On message.\n5. В открывшемся диалоговом окне убедитесь, что в поле Credential to connect with выбрана учетная запись, созданная на шаге 5.\n6. Чтобы закрыть диалоговое окно, в левом верхнем углу интерфейса нажмите Back to canvas.\nВ центре рабочей области появится блок Telegram Trigger с новым триггером.\n7. Нажмите дважды на добавленный триггер.\n8. В открывшемся окне свойств триггера нажмите Execute step или Test step, в зависимости от версии n8n.\n9. Нажмите Execute step.\nСлева появится всплывающее уведомление о том, что n8n отслеживает сообщения, отправленные в Telegram-бота.\n10. Отправьте любое сообщение в Telegram-бота.\nПосле этого на странице триггера в секции Output появятся данные отправленного сообщения.\n\n## 7. Добавьте в чат статус «… печатает / … typing»\n1. Нажмите Back to canvas.\n2. Нажмите + справа от стартового триггера.\n3. На вкладке выбора триггеров введите в поле поиска telegram и выберите Telegram в результатах поиска.\n4. В появившемся списке выберите Send a chat action.\n5. В открывшемся диалоговом окне убедитесь, что:\n- в поле Credential to connect with выбрана учетная запись, которую вы создали на шаге 5;\n- в левой области окна отображены параметры, которые вы получили на шаге 6 для стартового триггера, после того как нажали Execute step.\n\nЕсли вы не видите этих данных, то нажмите Back to canvas, повторно откройте стартовый триггер и протестируйте шаг.\n6. Перетащите параметр message | chat | id в поле Chat ID.\n7. Нажмите Execute step.\nВ правой части окна отобразится результат выполнения true.\n\n## 8. Настройте ответ пользователю от бота\nНастройте бота, чтобы он отправлял текст сообщения пользователя обратно:\n1. Нажмите Back to canvas.\n2. Нажмите + справа от созданного на предыдущем шаге действия Send a chat action.\n3. В открывшейся справа вкладке вновь найдите и выберите Telegram.\n4. В списке Actions выберите Send a text message.\n5. В открывшемся диалоговом окне введите параметры:\n- Chat ID — укажите {{ $node[\"Telegram Trigger\"].json[\"message\"][\"chat\"][\"id\"] }};\n- Text — укажите {{ $node[\"Telegram Trigger\"].json[\"message\"][\"text\"] }}.\n6. Чтобы вернуться к рабочей области, в левом верхнем углу нажмите Back to canvas.\n7. В верхней строке нажмите Save.\n8. В верхней строке активируйте бот.\nСозданный вами Telegram-бот активирован.\n\n## 9. Убедитесь, что бот работает\nОтправьте в Telegram любое сообщение боту.\nБот должен прислать обратно ваше сообщение.\n\n## Результат\nВы развернули платформу для создания рабочих процессов без написания кода в сервисе Container Apps или Notebooks и создали с ее помощью Telegram-бота.\nДальше вы можете:\n- настроить логику работы бота с помощью действий, доступных в n8n;\n- добавить интеграцию с LLM.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}