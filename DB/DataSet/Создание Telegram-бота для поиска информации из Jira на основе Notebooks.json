{
  "title": "Создание Telegram-бота для поиска информации из Jira на основе Notebooks",
  "chapters": [
    {
      "name": "Создание Telegram-бота для поиска информации из Jira на основе Notebooks",
      "content": "Практические руководства Evolution    \n\n # Создание Telegram-бота для поиска информации из Jira на основе Notebooks   Эта статья полезна?          \nС помощью этого руководства вы настроите парсинг Jira, создадите базу знаний в сервисе Managed RAG и разработаете Telegram-бота для интерактивной работы с данными.\nВ результате вы получите готовое решение для поиска информации в задачах Jira на базе образа N8N в сервисе Notebooks.\nВы будете использовать следующие сервисы:\n- Notebooks — сервис для запуска сред ML и работы DS-специалистов в ноутбуках на платформе Evolution.\n- Object Storage — объектное S3-хранилище с бесплатным хранением файлов, объемом до 15 ГБ.\n- Managed RAG —  сервис для создания и управления базами знаний, используемыми при генерации ответов языковыми моделями.\n- Jira — инструмент управления проектами для планирования и отслеживания работы в команде.\n- Telegram — чат-платформа.\n- N8N — платформа для автоматизации рабочих процессов и интеграции сервисов.\nШаги:\n1. Подготовьте среду.\n2. Настройте воркфлоу в N8N для парсинга Jira.\n3. Создайте базу знаний и получите токен доступа.\n4. Настройте Telegram-бота для взаимодействия с RAG.\n\n## Перед началом работы\n1. Зарегистрируйтесь в личном кабинете Cloud.ru.\nЕсли вы уже зарегистрированы, войдите под своей учетной записью.\n2. На верхней панели слева нажмите  и убедитесь в том, что сервис Notebooks в разделе AI Factory подключен.\nЕсли сервис Notebooks не подключен, оставьте заявку на подключение.\n\n## 1. Подготовьте среду\n1. Создайте сервисный аккаунт.\n2. Сгенерируйте API-ключ.\n3. Для хранения данных создайте бакет в Object Storage.\nУкажите класс хранения Стандартный.\n4. Создайте ноутбук со следующими параметрами:\n\n- Конфигурация — ncpu.medium.4.\n- Образ — Cloud.ru Jupyter N8n.\n\nПосле создания ноутбука на главной странице сервиса Notebooks в строке нужного ноутбука нажмите JupyterLab.\n\n## 2. Настройте воркфлоу в N8N для парсинга Jira\nНа этом шаге вы настроите воркфлоу в N8N для извлечения данных из Jira и преобразования их в текстовый файл.\n1. На главной странице JupyterLab в разделе Other нажмите на N8N.\n2. Дождитесь загрузки сервиса.\n3. Пройдите регистрацию и нажмите Next.\n4. (Опционально) Заполните следующую форму и нажмите Get started.\n5. Нажмите Create Workflow.\n6. Нажмите Add first step.\n7. Выберите триггер Trigger manually.\n8. Добавьте ноду HTTP Request со следующими параметрами:\n- Method: GET\n- URL: http://<jira_ip>/rest/api/2/search?jql=&maxResults=1000\nГде <jira_ip> — IP-адрес вашего Jira-сервера.\n- Authentication: Authentication\n- Generic Auth Type: Basic Auth\n- Добавьте credentials — логин и пароль от аккаунта в Jira.\n9. Добавьте справа ноду Code, указав Language — JavaScript.\n10. В ноду Code добавьте код:\n\n```\nlet rows = [];for (const item of items) {    if (!item.json || !Array.isArray(item.json.issues)) continue;    for (const issue of item.json.issues) {    let id = issue.id ?? '';    let key = issue.key ?? '';    let desc = issue.fields?.description ?? '';    let creator = issue.fields?.creator?.name ?? '';    rows.push([id, key, desc, creator].join(','));    }}return [{ json: { text: rows.join('\\n\\n') } }];\n```\n11. Добавьте справа ноду Aggregate.\n12. Добавьте ноду Convert to File со следующими параметрами:\n- Operation: Convert to Text File\n- Text Input Field: text\n- Put Output File in Field: data\n\nВ результате вы получите файл, в котором будет находиться текстовая выжимка из полей description, id, key, creator.\n13. Добавьте полученный файл в бакет Object Storage, созданный при подготовке среды.\nВы можете продумать, какие поля вам нужны, как лучше расположить данные в файле.\nВ этом практическом руководстве приведен пример для реализации быстрого старта.\n\n## 3. Создайте базу знаний и получите токен доступа\nНа этом шаге вы создадите базу знаний в сервисе Managed RAG на основе данных, полученных из Jira.\n1. В личном кабинете перейдите в сервис AI → Managed RAG.\n2. Нажмите Создать базу знаний.\n3. Укажите путь к папке в бакете Object Storage, созданном при подготовке среды.\nДля обработки ваших файлов будет создан сервисный аккаунт.\n4. Выберите расширение загруженных файлов.\n5. Активируйте опцию Вручную настроить обработку документов и модель.\n6. Включите аутентификацию и выберите сервисный аккаунт, созданный при подготовке среды.\n7. Нажмите Продолжить.\n8. Укажите настройки для экстракторов — парсеры, которые извлекают содержимое из файлов выбранного типа.\n9. Нажмите Продолжить.\n10. Выберите модель, которая преобразует содержимое документов в векторное представление, например, Qwen/Qwen3-Embedding-0.6B.\n11. Нажмите Создать.\nВы будете перенаправлены на страницу сервиса Managed RAG.\nБаза знаний будет создана и запущена в течение нескольких минут.\nДождитесь, когда база знаний перейдет в статус «Активная» и появится публичный URL-адрес.\n12. Создайте токен доступа для запросов к версии базы знаний.\n13. Скопируйте полученный токен — значение из поля access token.\n\n## 4. Настройте Telegram-бота для взаимодействия с RAG\nНа этом шаге вы создадите Telegram-бота и настроите его взаимодействие с базой знаний через Managed RAG.\n1. Зарегистрируйте бота в Telegram:\n1. В Telegram найдите бота BotFather.\n2. Выполните команду /newbot.\n3. Задайте имя (name) и имя пользователя (username) для бота.\nИмя пользователя должно заканчиваться на «Bot» или «_bot».\n4. Сохраните токен бота, который предоставит BotFather.\n5. Убедитесь, что в Telegram созданный бот отображается в результатах поиска по имени.\n2. Вернитесь в N8N и в том же воркфлоу выберите Telegram Trigger: Updates message.\n3. Создайте credentials, вставив токен вашего бота.\n4. Проверьте работоспособность webhook.\n5. Добавьте ноду HTTP Request со следующими параметрами:\n- Method: POST\n- URL: перейдите в Managed RAG → Название вашей базы знаний → API и скопируйте URL после слова «POST».\n- Выберите один из методов:\n- retrieve — если нужны только ссылки.\n- retrieve_generate — если нужен быстрый ответ и точность не важна.\n- retrieve_rerank — когда важна точность ранжирования.\n- retrieve_rerank_generate — точность ранжирования + готовый ответ.\n \n Пример\n- Добавьте код в формате JSON:\n```\n{  \"project_id\": \"<project_id>\",  \"query\": \"{{ $json.message.text }}\",  \"llm_settings\": {    \"model_settings\": {      \"model\": \"openai/gpt-oss-120b\"    },    \"system_prompt\": \"Вы полезный помощник, который отвечает на вопросы, основываясь на предоставленном контексте.\",    \"temperature\": 1  },  \"retrieve_limit\": 3,  \"n_chunks_in_context\": 3,  \"rag_version\": \"<your_rag_version>\"}\n```\n\nГде:\n- <project_id> — идентификатор вашего проекта.\n- <your_access_token> — токен доступа, полученный ранее.\n- <your_rag_version> — версия RAG из вкладки Информация о версии.\nПодробнее о параметрах — в документации Managed RAG.\n6. Отправьте запрос и убедитесь, что получаете корректный ответ от сервиса.\n7. Добавьте ноду Telegram send message.\n8. В правом верхнем углу установите переключатель в положение Activate.\nТеперь вы можете получать релевантные ответы по своей базе знаний интерактивно прямо в Telegram.\nНапример, нас интересует информация о деятельносты Ирины Сидоровой.\nТакой правильный ответ мы получаем.\n\n## Результат\nВ ходе лабораторной работы вы создали LOW-Code RAG-систему на базе данных из Jira, настроили воркфлоу в N8N для извлечения данных, создали базу знаний в Managed RAG и разработали Telegram-бота для интерактивного взаимодействия с информацией.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}