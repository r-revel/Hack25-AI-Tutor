{
  "title": "Установка Onlyoffice Community на выделенный сервер Bare Metal",
  "chapters": [
    {
      "name": "Установка Onlyoffice Community на выделенный сервер Bare Metal",
      "content": "Практические руководства Evolution    \n\n # Установка Onlyoffice Community на выделенный сервер Bare Metal   Эта статья полезна?          \nС помощью этого руководства вы развернете экосистему приложений для совместной работы Onlyoffice.\nДоступ к приложениям обеспечивается через онлайн-портал.\nВы установите и настроите два модуля пакета Onlyoffice Community Edition:\n- Сервер документов\n- Сервер совместной работы\nШаги:\n1. Разверните инфраструктуру.\n2. Настройте систему для работы.\n3. Настройте базу данных.\n4. Настройте контейнеры с модулями Onlyoffice.\n5. Запустите и настройте Onlyoffice.\n\n## 1. Разверните инфраструктуру\n1. Арендуйте сервер Bare Metal.\nВ блоке Сетевые параметры выберите подсеть по умолчанию и активируйте опцию Подключить публичный IP:\n2. Убедитесь, что на сервере работает интернет:\n3. Подключитесь к серверу по SSH или через виртуальную консоль.\n4. Установите Docker.\nПример установки Docker на ОС Debian 10:\n\n## 2. Настройте систему для работы\n1. Подготовьте каталоги для проекта:\n```\nsudo mkdir -p \"/app/onlyoffice/mysql/conf.d\";sudo mkdir -p \"/app/onlyoffice/mysql/data\";sudo mkdir -p \"/app/onlyoffice/mysql/initdb\";sudo mkdir -p \"/app/onlyoffice/mysql/logs\";chown 999:999 /app/onlyoffice/mysql/logs;\nsudo mkdir -p \"/app/onlyoffice/CommunityServer/data\";sudo mkdir -p \"/app/onlyoffice/CommunityServer/logs\";\nsudo mkdir -p \"/app/onlyoffice/DocumentServer/data\";sudo mkdir -p \"/app/onlyoffice/DocumentServer/logs\";\n```\n2. Создайте сеть для связности Docker-контейнеров:\n```\nsudo docker network create --driver bridge onlyoffice\n```\n\n## 3. Настройте базу данных\n1. Создайте файл с конфигурацией SQL-сервера:\n```\necho \"[mysqld]sql_mode = 'NO_ENGINE_SUBSTITUTION'max_connections = 1000max_allowed_packet = 1048576000group_concat_max_len = 2048log-error = /var/log/mysql/error.log\" > /app/onlyoffice/mysql/conf.d/onlyoffice.cnfsudo chmod 0644 /app/onlyoffice/mysql/conf.d/onlyoffice.cnf\n```\n\nПримечаниеВ примере использованы минимальные настройки.\nДля лучшей производительности рекомендуется использовать mysqltuner и другие инструменты оптимизации.\n2. Создайте файл для оптимизации создания пользователей:\n```\necho \"CREATE USER 'onlyoffice_user'@'localhost' IDENTIFIED BY 'onlyoffice_pass';CREATE USER 'mail_admin'@'localhost' IDENTIFIED BY '<password>';GRANT ALL PRIVILEGES ON * . * TO 'root'@'%' IDENTIFIED BY '<password>';GRANT ALL PRIVILEGES ON * . * TO 'onlyoffice_user'@'%' IDENTIFIED BY '<password>';GRANT ALL PRIVILEGES ON * . * TO 'mail_admin'@'%' IDENTIFIED BY '<password>';FLUSH PRIVILEGES;\" > /app/onlyoffice/mysql/initdb/setup.sql\n```\n\nГде <password> — пароли пользователей.\n3. Установите и запустите контейнер с базой данных:\n```\nsudo docker run --net onlyoffice -i -t -d --restart=always --name onlyoffice-mysql-server -p 3306:3306 \\-v /app/onlyoffice/mysql/conf.d:/etc/mysql/conf.d \\-v /app/onlyoffice/mysql/data:/var/lib/mysql \\-v /app/onlyoffice/mysql/initdb:/docker-entrypoint-initdb.d \\-v /app/onlyoffice/mysql/logs:/var/log/mysql \\-e MYSQL_ROOT_PASSWORD=my-secret-pw \\-e MYSQL_DATABASE=onlyoffice \\mysql:5.7\n```\nПример выполнения команд:\n\n## 4. Настройте контейнеры с модулями Onlyoffice\n1. Установите и запустите контейнер с сервером документов:\n```\nsudo docker run --net onlyoffice -i -t -d --restart=always --name onlyoffice-document-server \\-v /app/onlyoffice/DocumentServer/logs:/var/log/onlyoffice  \\-v /app/onlyoffice/DocumentServer/data:/var/www/onlyoffice/Data  \\-v /app/onlyoffice/DocumentServer/lib:/var/lib/onlyoffice \\-v /app/onlyoffice/DocumentServer/db:/var/lib/postgresql \\onlyoffice/documentserver\n```\n2. Установите и запустите контейнер с сервером совместной работы:\n```\nsudo docker run --net onlyoffice -i -t -d --restart=always --name onlyoffice-community-server -p 80:80 -p 443:443 -p 5222:5222 \\-e MYSQL_SERVER_ROOT_PASSWORD=my-secret-pw \\-e MYSQL_SERVER_DB_NAME=onlyoffice \\-e MYSQL_SERVER_HOST=onlyoffice-mysql-server \\-e MYSQL_SERVER_USER=onlyoffice_user \\-e MYSQL_SERVER_PASS=onlyoffice_pass \\-e DOCUMENT_SERVER_PORT_80_TCP_ADDR=onlyoffice-document-server \\-v /app/onlyoffice/CommunityServer/data:/var/www/onlyoffice/Data \\-v /app/onlyoffice/CommunityServer/logs:/var/log/onlyoffice \\onlyoffice/communityserver\n```\n\n## 5. Запустите и настройте Onlyoffice\n1. В браузере перейдите на страницу https://<IP-адрес_сервера>:4443. Дождитесь окончания загрузки:\n\n \n Если загрузка не завершается \n \nОткроется окно с настройками Onlyoffice:\n2. В блоке Password введите пароль.\n3. В поле Language выберите язык.\n4. В поле Time Zone выберите часовой пояс.\n5. Нажмите Continue.\nВы попадете в главное меню Onlyoffice, из которого можно настроить все необходимые компоненты для совместной работы.\nУстановка и настройка завершена.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}