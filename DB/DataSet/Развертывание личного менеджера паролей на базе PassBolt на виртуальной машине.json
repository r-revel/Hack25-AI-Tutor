{
  "title": "Развертывание личного менеджера паролей на базе PassBolt на виртуальной машине",
  "chapters": [
    {
      "name": "Развертывание личного менеджера паролей на базе PassBolt на виртуальной машине",
      "content": "Практические руководства Evolution    \n\n # Развертывание личного менеджера паролей на базе PassBolt на виртуальной машине   Эта статья полезна?          \nС помощью этого руководства вы развернете менеджер паролей на базе Passbolt на виртуальной машине.\nВы будете использовать следующие сервисы:\n- Виртуальная машина free tier — сервис, в рамках которого предоставляется бесплатная виртуальная машина с готовой конфигурацией.\n- Публичный IP-адрес для доступа к менеджеру паролей через интернет.\n- Бесплатный сервис nip.io для получения публичного доменного имени и сертификата.\nВы также можете использовать собственное зарегистрированное доменное имя и SSL-сертификат для организации доступа.\nШаги:\n1. Создайте виртуальную машину.\n2. Настройте группу безопасности.\n3. Установите Passbolt.\n4. Настройте Passbolt.\n\n## Перед началом работы\n1. Зарегистрируйтесь в личном кабинете Cloud.ru.\nЕсли вы уже зарегистрированы, войдите под своей учетной записью.\n2. Создайте домен с помощью сервиса nip.io, если не планируете использовать собственное зарегистрированное доменное имя.\n\n## 1. Создайте виртуальную машину\nСоздайте бесплатную виртуальную машину со следующими параметрами:\n1. В поле Название укажите название виртуальной машины, например passbolt-server.\n2. На вкладке Публичные выберите образ Ubuntu 22.04.\n3. Назначьте публичный IP-адрес виртуальной машине — оставьте включенной опцию Подключить публичный IP. Для виртуальной машины будет арендован и назначен прямой публичный IP.\n4. В поле Логин укажите логин пользователя виртуальной машины, например user1.\n5. Выберите метод аутентификации — пароль.\n6. В поле Имя хоста укажите уникальное имя устройства, по которому можно идентифицировать виртуальную машину в сети, например passbolt-server.\nУбедитесь, что в личном кабинете на странице сервиса «Виртуальные машины»:\n- отображается виртуальная машина passbolt-server;\n- статус виртуальной машины — «Запущена»;\n- виртуальной машине назначен публичный IP-адрес.\n\n## 2. Настройте группу безопасности\nГруппы безопасности в облаке Evolution позволяют контролировать входящий и исходящий трафик для создаваемых ресурсов.\nВы настроите правила фильтрации трафика — разрешите весь входящий трафик по порту 443 (HTTPS) и весь исходящий трафик.\nСоздайте новую группу безопасности со следующими параметрами:\n1. Выберите Зону доступности, в которой необходимо разместить группу безопасности. Укажите ту же зону доступности, что выбрана для виртуальной машины passbolt-server.\n2. Укажите Название группы безопасности, например passbolt-server.\n3. Добавьте правила входящего и исходящего трафика.\nПравила входящего трафика:\n1. Правило 1:\n\n1. Протокол — TCP\n2. Порт — 443\n3. Тип источника  — IP-адрес\n4. Источник — 0.0.0.0/0\n2. Правило 2\n\n1. Протокол — TCP\n2. Порт — 80\n3. Тип источника — IP-адрес\n4. Источник — 0.0.0.0/0\nПравила исходящего трафика:\n1. Протокол — любой\n2. Порт — оставьте пустым\n3. Тип адресата — IP-адрес\n4. Адресат — 0.0.0.0/0\n4. Назначьте созданную группу безопасности виртуальной машине passbolt-server.\nЕсли в группе безопасности присутствуют другие виртуальные машины, исключите их из группы.\nУбедитесь, что в личном кабинете на странице сервиса «Виртуальные машины», в разделе Сетевые параметры отображается группа безопасности passbolt-server.\n\n## 3. Установите Passbolt\nДля настройки виртуальной машины вы будете использовать серийную консоль в браузере.\n1. Подключитесь к виртуальной машине passbolt-server через серийную консоль.\n2. Обновите индекс пакетов ОС и установите обновления пакетов:\n```\nsudo apt update -ysudo apt upgrade -y\n```\n3. Скачайте и запустите скрипт настройки репозиториев Passbolt:\n```\nwget \"https://download.passbolt.com/ce/installer/passbolt-repo-setup.ce.sh\"wget https://github.com/passbolt/passbolt-dep-scripts/releases/latest/download/passbolt-ce-SHA512SUM.txtsha512sum -c passbolt-ce-SHA512SUM.txt && sudo bash ./passbolt-repo-setup.ce.sh  || echo \\\"Bad checksum. Aborting\\\" && rm -f passbolt-repo-setup.ce.sh\n```\n\nВ результате выполнения скриптов вы увидите сообщение, что настройка репозиториев завершена успешно.\n \n Вывод команды\nПодготовьте параметры для установки Passbolt и выполните установку:\n1. Подготовьте доменное имя вида {Публичный_IP-адрес_виртуальной_машины_passbolt-server}.nip.io, например 1.1.1.1.nip.io.\nИли используйте собственный зарегистрированный домен.\n2. Сконфигурируйте параметры установки:\n```\n  echo passbolt-ce-server passbolt/mysql-configuration boolean true | sudo debconf-set-selections  echo passbolt-ce-server passbolt/mysql-passbolt-username string pb_user | sudo debconf-set-selections  echo passbolt-ce-server passbolt/mysql-passbolt-password password P@ssw0rd | sudo debconf-set-selections  echo passbolt-ce-server passbolt/mysql-passbolt-password-repeat password P@ssw0rd | sudo debconf-set-selections  echo passbolt-ce-server passbolt/mysql-passbolt-dbname string passbolt | sudo debconf-set-selections  echo passbolt-ce-server passbolt/nginx-configuration boolean true | sudo debconf-set-selections  echo passbolt-ce-server passbolt/nginx-configuration-three-choices select auto | sudo debconf-set-selections  echo passbolt-ce-server passbolt/nginx-domain string 176.109.108.146.nip.io | sudo debconf-set-selections\nВ ``P@ssw0rd`` задайте пароль.\n```\n3. Выполните установку Passbolt:\n```\nsudo DEBIAN_FRONTEND=noninteractive apt-get install passbolt-ce-server -y\n```\nУбедитесь, что при переходе по домену в браузере ображается мастер настройки Passbolt.\n\n## 4. Настройте Passbolt\n1. Откройте в браузере {Публичный_IP-адрес_виртуальной_машины_passbolt-server}.nip.io, например 1.1.1.1.nip.io.\n2. Нажмите Get Started.\n3. В открывшемся окне проверьте, что все обязательные поля заполнены и нажмите Start cofiguration.\n4. Заполните параметры базы данных:\n- Database connection url — localhost.\n- Username — pb_user.\n- Password — пароль, который вы указали на шаге 3.\n- Database name — passbolt.\n5. Нажмите Next.\n6. На странице «Create a new OpenPGP key for your server» заполните поля:\n- Server Name — укажите произвольное имя сервера.\n- Server Email—укажите вашу электронную почту.\n7. Перейдите на вкладку Emails и укажите параметры почтового сервера.\nВы можете использовать вашу личную почту, а параметры конфигурации (SMTP Host, Port и т.д.) получить в документации вашего почтового провайдера.\n8. Нажмите Next.\n9. Заполните обязательные поля на странице «Admin user details» — First name, Last name, Username.\n10. Нажмите Next.\nДождитесь завершения настройки Passbolt.\nНастройте административный аккаунт:\n1. После окончания настройки, появится окно с предложением установить расширение для браузера.\nСкачайте и установите расширение.\n2. Создайте новый ключ.\nPassbolt попросит вас создать или импортировать ключ, который будет позже использоваться для вашей идентификации и шифрования ваших паролей.\nВаш ключ должен быть защищен паролем.\n3. Загрузите комплект восстановления.\nЭто необходимый шаг.\nВаш ключ — единственный способ получить доступ к вашей учетной записи и паролям.\nЕсли вы потеряете ключ, ваши зашифрованные данные будут утеряны, даже если вы помните свою парольную фразу.\n4. Определите токен безопасности.\nВыбор цвета и трех символов — вторичный механизм безопасности, который поможет вам митигировать фишинговые атаки.\nКаждый раз, когда вы выполняете критичные операции, вы должны видеть этот токен.\n5. Ваша учетная запись администратора настроена.\nВы будете перенаправлены на страницу входа в Passbolt.\nПроверьте, что вы можете:\n- создать пароль в браузере;\n- при переходе на сайты заполнить внесенные пароли через расширение браузера;\n- подключить приложение на мобильном телефоне к вашему серверу Passbolt.\n\n## Результат\nВы установили и настроили собственный безопасный менеджер паролей на базе Passbolt.\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}