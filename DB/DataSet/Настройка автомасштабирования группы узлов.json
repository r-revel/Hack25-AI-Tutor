{
  "title": "Настройка автомасштабирования группы узлов",
  "chapters": [
    {
      "name": "Настройка автомасштабирования группы узлов",
      "content": "Практические руководства Evolution    \n\n # Настройка автомасштабирования группы узлов   Эта статья полезна?          \nВ сценарии рассмотрим, как настраивать и управлять автомасштабированием через API:\n1. Создадим группу узлов с поддержкой автомасштабирования.\n2. Отредактируем минимальное и максимальное количество узлов.\n3. Изменим политику масштабирования на фиксированную.\n4. Изменим политику масштабирования с фиксированной на автоматическую.\n\n## Перед началом работы\n1. Создайте кластер по инструкции.\n2. Пройдите аутентификацию в API.\n\n## Создайте группу узлов с поддержкой автомасштабирования\nВыполните HTTP-запрос:\n```\nPOST https://mk8s.api.cloud.ru/v2/clusters/{clusterId}/node-pools\n```\n\nГде clusterId — идентификатор кластера, для которого нужно создать группу узлов.\nВ теле запроса передайте параметры:\n```\n{  \"displayName\": \"cloudru-node-pool-scale\",    \"scalePolicy\": {      \"autoScale\": {        \"minCount\": 2,        \"maxCount\": 5,        \"initialCount\": 3      }    },  \"machineConfiguration\": {    \"diskSize\": 10,    \"flavorId\": \"1f38e57c-0004-4f44-badf-1a0f3c09a128\"  },  \"networkConfiguration\": {    \"nodesSubnetCidr\": \"10.0.0.0/24\"  }}\n```\n\nВ примере вы можете использовать указанные значения параметров displayName, diskSize, nodesSubnetCidr или заменить их на свои.\nВ результате выполнения запроса будет создана группа узлов с тремя рабочими узлами.\nРазмер группы узлов может масштабироваться в зависимости от нагрузки от двух до пяти узлов.\n\n## Отредактируйте параметры автомасштабирования\nВыполните HTTP-запрос:\n```\nPATCH https://mk8s.api.cloud.ru/v2/node-pools/{nodePoolId}\n```\n\nГде nodePoolId — идентификатор созданной группы узлов.\nВ теле запроса передайте параметры:\n```\n{  \"data\": {     \"scalePolicy\": {       \"autoScale\": {         \"minCount\": 1,         \"maxCount\": 6       }     }   }}\n```\n\nПараметры масштабирования изменятся.\nТеперь размер группы узлов может масштабироваться в зависимости от нагрузки от одного до шести узлов.\n\n## Измените политику масштабирования на фиксированную\nВыполните HTTP-запрос:\n```\nPATCH https://mk8s.api.cloud.ru/v2/node-pools/{nodePoolId}\n```\n\nГде nodePoolId — идентификатор группы узлов.\nВ теле запроса передайте следующие параметры:\n```\n{  \"data\": {    \"scalePolicy\": {      \"fixedScale\": {        \"count\": 4      }    }  }}\n```\n\nВ результате размер группы узлов будет постоянным.\n\n## Измените политику масштабирования на автоматическую\nВыполните HTTP-запрос:\n```\nPATCH https://mk8s.api.cloud.ru/v2/node-pools/{nodePoolId}\n```\n\nВ теле запроса передайте параметры:\n```\n{  \"data\": {    \"scalePolicy\": {      \"autoScale\": {        \"minCount\": 0,        \"maxCount\": 6      }    }  }}\n```\n\nПосле выполнения запроса группа узлов будет состоять из четырех рабочих узлов.\nРазмер группы может масштабироваться в зависимости от нагрузки, уменьшаясь до нуля или увеличиваясь до шести узлов.\nСм.также- Создание группы узлов\n- Справочник API\n- Автоматическое масштабирование группы узлов\n\n  [© 2025 Cloud.ru](https://cloud.ru)",
      "debug": {
        "start_page": 1,
        "end_page": 1
      }
    }
  ]
}